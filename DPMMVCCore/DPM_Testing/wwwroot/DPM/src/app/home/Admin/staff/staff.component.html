<p-toast position="top-right"></p-toast>
<form [formGroup]="staffForm">
    <div class="form-group">
      <label for="Username">Username</label>
      <input formControlName="UserName" type="text" class="form-control" id="Username" aria-describedby="Username" placeholder="Enter Username">
    </div>
    <div class="form-group">
        <label for="Firstname">First Name</label>
        <input formControlName="FirstName" type="text" class="form-control" id="FirstName" aria-describedby="FirstName" placeholder="Enter First Name">
        <span class="text-danger" *ngIf="staffForm.controls['FirstName'].dirty" [hidden]="!(staffForm.hasError('required', 'FirstName'))">
            <i class="pi pi-info-circle"></i>&nbsp;First name is required 
        </span>
    </div>
      <div class="form-group">
        <label for="Lastname">Last Name</label>
        <input formControlName="LastName" type="text" class="form-control" id="Lastname" aria-describedby="Lastname" placeholder="Enter Last Name">
        <span class="text-danger" *ngIf="staffForm.controls['LastName'].dirty" [hidden]="!(staffForm.hasError('required', 'LastName'))">
            <i class="pi pi-info-circle"></i>&nbsp;Last name is required 
        </span>
    </div>
    <div class="form-group">
        <label for="Email">Email address</label>
        <input formControlName="Email" type="email" class="form-control" id="Email" aria-describedby="Email" placeholder="Enter Email">
        <span class="text-danger" *ngIf="staffForm.controls['Email'].dirty" [hidden]="!(staffForm.hasError('required', 'Email'))">
            <i class="pi pi-info-circle"></i>&nbsp;Email is required 
        </span>
        <span class="text-danger" *ngIf="staffForm.controls['Email'].dirty" [hidden]="!(staffForm.hasError('pattern', 'Email'))">
            <i class="pi pi-info-circle"></i>&nbsp;Email format is not correct
        </span>
    </div>
    <div class="form-group">
        <label for="Phone">Phone Number</label>
        <input formControlName="PhoneNumber" type="number" class="form-control" id="Phone" aria-describedby="Phone" placeholder="Enter phone number">
        <span class="text-danger" *ngIf="staffForm.controls['PhoneNumber'].dirty" [hidden]="!(staffForm.hasError('required', 'PhoneNumber'))">
            <i class="pi pi-info-circle"></i>&nbsp;Phone number is required 
        </span>
    </div>
    <div class="form-group">
        <label for="DesignationName">Select Designation</label>
        <select formControlName="DesignationId" class="form-control">
            <option value="0">Choose</option>
            <option *ngFor="let EL of designationObjList" [ngValue]="EL.DAId">{{EL.DesignationName}}</option>
        </select>
    </div>
    <div class="form-group">
      <label for="Password">Password</label>
      <input formControlName="Password" type="password" class="form-control" id="Password" placeholder="Enter Password">
      <span class="text-danger" *ngIf="staffForm.controls['Password'].dirty"
      [hidden]="!(staffForm.hasError('required', 'Password'))">
      <i class="pi pi-info-circle"></i>&nbsp;Password is required.
  </span>
    </div>
    <div class="form-group">
        <label>Enable</label>
      <label class="switch">
          <input formControlName="Enable" type="checkbox" checked>
          <span class="slider round"></span>
      </label>
    </div>
    <button (click)="onCancel()" type="submit" class="btn btn-primary">Cancel</button>
    <button (click)="recordSubmit()" type="submit" class="btn btn-primary">{{staffObj.UserId === '' ?'Submit':'Update'}}</button>
  </form>
  <br />
<br />
<p-card class="dpm-card mt-4">
    <p-table [style]="{width:'100%', overflow:'scroll'}" [value]="staffList" [paginator]="true" [rowHover]="true" [rows]="10" [showCurrentPageReport]="true" currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries">
        <ng-template pTemplate="colgroup">
            <colgroup>
                <col style="width:8em;">
                <col style="width:8em;">
                <col style="width:15em;">
                <col style="width:15em;">
                <col style="width:15em;">
                <col style="width:8em;">
                <col style="width:8em;">
                <col style="width:8em;">
                <col style="width:12em;">
            </colgroup>
        </ng-template>
        <ng-template pTemplate="header">
            <tr> 
                <th>Designation</th>
                <th>UserName</th>
                <th>FirstName</th>
                <th>LastName</th>
                <th>Password</th>
                <th>Email</th>
                <th>PhoneNumber</th>
                <th>Enable</th>
                <th>Action</th>
            </tr>
        </ng-template>
        <ng-template pTemplate="body" let-staffList>
            <tr>
                <td>{{staffList.DesignationName}}</td>
                <td>{{staffList.UserName}}</td>
                <td>{{staffList.FirstName}}</td>
                <td>{{staffList.LastName}}</td>
                <td>
                    <span *ngIf="isShown">
                    {{staffList.Password}}
                    </span>
                    <a (click)="toggleShow()"><i
                        class="pi pi-eye"></i> </a>
                    <span>

                    </span>
                </td>
                <td>{{staffList.Email}}</td>
                <td>{{staffList.PhoneNumber}}</td>
                <td>{{staffList.Enable === 1?'Yes':'No'}}</td>
                <td>
                    <button pButton title="Edit" icon="pi pi-pencil" (click)="onEdit(staffList)" class="p-button-rounded p-button-success p-button-text"></button>
                    <button pButton title="Delete" icon="pi pi-trash" (click)="onDelete(staffList)" class="p-button-rounded p-button-danger p-button-text"></button>
                </td>
            </tr>
        </ng-template>
        <ng-template pTemplate="emptymessage">
            <tr>
                <td colspan="8">No data found.</td>
            </tr>
        </ng-template>
    </p-table>
</p-card>
